<?xml version="1.0"?>
<table xmlns="http://query.yahooapis.com/v1/schema/table.xsd">
  <meta>
    <author>Christian Heilmann</author>
    <description>Weather with woeid</description>
    <documentationURL>http://developer.yahoo.com/weather/</documentationURL>
  </meta>
  <bindings>
    <select produces="XML" itemPath="">
      <inputs>
        <key id="location" type="xs:string" paramType="query" required="true"/>
        <key id="u" type="xs:string" paramType="query"/>
      </inputs>
        <execute><![CDATA[
          var x = y.query('select woeid from geo.places(1) where location='+location);
          y.log(x);
          var h = y.xpath(x.results,'//@href'); 
          var id = h.split('id=')[1].split('&')[0];
          response.object = <user_id>{id}</user_id>;
        ]]></execute>
      </select>

    </select>
  </bindings>
</table>